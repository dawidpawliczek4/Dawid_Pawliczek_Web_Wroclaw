<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Potwierdzenie</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background: #f4f4f4; }
        .success { color: green; margin-bottom: 20px; }
        a { color: #007acc; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1 class="success">Zamówienie złożone pomyślnie!</h1>
    <div id="summary"></div>
    <a href="/Dawid_Pawliczek_Web_Wroclaw">Nowe zamówienie</a>
    <script>
        const order = JSON.parse(localStorage.getItem('cart') || '[]');
        const summaryEl = document.getElementById('summary');
        if (order.length === 0) {
            summaryEl.innerHTML = '<p>Brak przedmiotów w zamówieniu.</p>';
        } else {
            let html = '<table><thead><tr><th>Produkt</th><th>Ilość</th><th>Cena</th><th>Suma</th></tr></thead><tbody>';
            let total = 0;
            order.forEach(item => {
                const unit = item.price.main + item.price.fractional / 100;
                const subtotal = unit * item.quantity;
                total += subtotal;
                html += `<tr><td>${item.name}</td><td>${item.quantity}</td><td>${unit.toFixed(2)} zł</td><td>${subtotal.toFixed(2)} zł</td></tr>`;
            });
            html += `</tbody></table><div style="text-align:right;font-weight:bold">Total: ${total.toFixed(2)} zł</div>`;
            summaryEl.innerHTML = html;
        }
        localStorage.removeItem('cart');
    </script>
</body>
</html>
